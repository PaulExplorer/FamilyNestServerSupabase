var initConnection=(a=>{endpoint=a;fetch(endpoint,{method:`GET`,headers:{"Content-Type":`application/json`,...additionalHeaders}}).then(async(a)=>{if(!a.ok){const b=await a.json().catch(()=>null);const c=b?.error||`HTTP error! status: ${a.status}`;throw new Error(c)};return a.json()}).then(a=>window.wasmBindings.init_connection(a)).catch(a=>console.error(`Error:`,a.message))});let endpoint=``;let is_local_editable=!0;window.getData=()=>{fetch(endpoint+ `/data`,{method:`GET`,headers:{"Content-Type":`application/json`,...additionalHeaders}}).then(async(a)=>{if(!a.ok){const b=await a.json();throw new Error(b.error||`HTTP error! status: ${a.status}`)};return a.json()}).then(a=>window.wasmBindings.represent_data(a[`data`])).catch(a=>console.error(`Error fetching data:`,a.message))};window.batchUpdatePersons=(a,b,c)=>{fetch(endpoint+ `/persons/batch`,{method:`POST`,headers:{"Content-Type":`application/json`,...additionalHeaders},body:JSON.stringify({add:a,modify:b,delete:c})}).then(async(a)=>{if(!a.ok){const b=await a.json();throw new Error(b.error||`HTTP error! status: ${a.status}`)};return a.json()}).then(a=>{console.debug(`Batch update successful:`,a)}).catch(a=>{console.error(`Error during batch update:`,a.message);const b=document.getElementById(`error-modal`);const c=document.getElementById(`error-message-text`);const d=document.getElementById(`error-refresh-button`);c.textContent=a.message;b.classList.add(`visible`);d.onclick=()=>window.location.reload()})};window.getNewID=()=>fetch(endpoint+ `/id/new`,{method:`GET`,headers:{"Content-Type":`application/json`,...additionalHeaders}}).then(async(a)=>{if(!a.ok){const b=await a.json();throw new Error(b.error||`HTTP error! status: ${a.status}`)};return a.json()}).then(a=>a[`id`]).catch(a=>console.error(`Can't get new ID:`,a.message));window.disableEdition=()=>{is_local_editable=!1;const a=document.querySelectorAll(`input.is-edit, textarea.is-edit, button.is-edit, select.is-edit, .is-edit input, .is-edit textarea, .is-edit select`);a.forEach(a=>{a.disabled=!0;a.setAttribute(`contenteditable`,`false`)})}