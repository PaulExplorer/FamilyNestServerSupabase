var initMap=(()=>{let k=5,o=`visible`,m=1,j=null,n=`click`,l=0;var i=(()=>{a.classList.remove(o)});var h=(()=>{if(!e||!f)return;f.clearLayers();const a=window.wasmBindings.get_event_by_cities();if(a.length===l){return};a.forEach(([a,b,c,d])=>{let e=`<b>${a}</b><br/>`;let g=l;for(const [a,b] of d.entries()){const c=translate(eventTypesTranslateKey[a])||a;e+=`${c}: ${b}<br/>`;g+=b};if(g>l){let a=`#4CAF50`;let d=8;if(g>60){a=`#5C0000`;d=24}else if(g>35){a=`#8B0000`;d=20}else if(g>15){a=`#F44336`;d=16}else if(g>k){a=`#FFC107`;d=12};const h=L.circleMarker([b,c],{radius:d,fillColor:a,color:`#000`,weight:m,opacity:m,fillOpacity:0.8});h.bindPopup(e);f.addLayer(h)}})});var g=(()=>{if(!e&&L){e=L.map(d).setView([46.603354,1.888334],k);L.tileLayer(`https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png`,{attribution:`&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors`}).addTo(e);f=L.layerGroup().addTo(e)}});const a=document.getElementById(`map-modal-overlay`);const b=document.getElementById(`map-btn`);const c=document.getElementById(`close-map-modal-btn`);const d=document.getElementById(`map-container`);let e=j;let f=j;b.addEventListener(n,()=>{a.classList.add(o);g();setTimeout(()=>e.invalidateSize(),10);h()});c.addEventListener(n,()=>{i()});a.addEventListener(n,b=>{if(b.target===a){i()}});document.addEventListener(`keydown`,b=>{if(b.key===`Escape`&&a.classList.contains(o)){i()}})})